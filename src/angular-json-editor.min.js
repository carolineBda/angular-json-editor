"use strict";angular.module("angularJsonEditor",[]).factory("jsonService",[function(){return{getValue:function(a){try{return JSON.parse(a)}catch(b){return a}}}}]).directive("jsonEditor",function(){return{restrict:"E",replace:!0,scope:{content:"=",displayType:"@"},template:'<ul class="tree"><object-editor ng-repeat="(k, v) in content track by $index" object-type="displayType" key="k" value="content"></object-editor></ul>'}}).directive("objectEditor",["$compile",function(a){return{restrict:"E",replace:!0,scope:{key:"=",value:"=",objectType:"="},template:"<li></li>",link:function(b,c){var d=function(a){return"array"===a?'<div class="branch">&nbsp;</div>':"<span>{{key}}</span>"},e="",f=b.value[b.key];if(angular.isArray(f))e+=d(b.objectType)+'<json-editor display-type="array" content="value[key]"></json-editor>',e+='<new-leaf parent="value[key]"></new-leaf>';else if(angular.isObject(f))e+=d(b.objectType)+'<json-editor content="value[key]"></json-editor>',e+='<new-property parent="value[key]"></new-property>';else{var g=f&&f.length>100;e+=g?'<label>{{key}}<div class="large editor" ui-ace="{mode: \'html\'}" ng-model="value[key]"></div></label> ':'<label>{{key}}<input type="text" name="{{key}}" class="small" ng-model="value[key]" /></label> '}c.append(e),a(c.contents())(b)}}}]).directive("newLeaf",["jsonService",function(a){return{restrict:"E",replace:!0,scope:{parent:"="},template:'<div><input ng-model="propertyValue" type="text" class="small" /><button ng-click="addProperty()" title="Add">+</button></div>',link:function(b){b.addProperty=function(){b.parent.push(a.getValue(b.propertyValue))}}}}]).directive("newProperty",["jsonService",function(a){return{restrict:"E",replace:!0,scope:{parent:"="},template:'<div><input ng-model="propertyKey" type="text" class="small" />: <input ng-model="propertyValue" type="text" class="small" /><button ng-click="addProperty()" title="Add">+</button></div>',link:function(b){b.addProperty=function(){b.parent[b.propertyKey]=a.getValue(b.propertyValue)}}}}]);